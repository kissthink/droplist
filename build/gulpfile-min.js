/*!build time : 2014-09-26 4:21:54 PM*/
var gulp=require("gulp"),kmc=require("gulp-kmc"),less=require("gulp-less"),css=require("gulp-mini-css"),src=".",dest="./build",pkg="kg/droplist/2.0.1";gulp.task("xtpl",function(){gulp.src(src+"/lib/*.xtpl.html").pipe(kmc.xtpl()).pipe(gulp.dest(src+"/lib"))}),kmc.config({depFilePath:dest+"/mods.js",packages:[{name:pkg,ignorePackageNameInUri:!0,combine:!1,base:src}]}),gulp.task("kmc",function(){gulp.src(src+"/index.js").pipe(kmc.convert({fixModuleName:!0,ignoreFiles:["-min.js"]})).pipe(kmc.combo({minify:!0,ext:"-min.js",files:[{src:src+"/index.js",dest:dest+"/index.js"}]})).pipe(gulp.dest(dest))}),gulp.task("css",function(){gulp.src(src+"/*.less").pipe(less()).pipe(gulp.dest(dest)).pipe(css({ext:"-min.css"})).pipe(gulp.dest(dest))}),gulp.task("watch",function(){gulp.watch(src+"/**/*.js",["kmc"]),gulp.watch(src+"/**/*.less",["css"])}),gulp.task("default",["kmc","css"]);